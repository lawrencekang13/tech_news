"use strict";(()=>{var e={};e.id=300,e.ids=[300,888],e.modules={8248:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>h,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>m,getStaticProps:()=>u,reportWebVitals:()=>g,routeModule:()=>f,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>v});var r=a(7093),i=a(5244),l=a(1323),n=a(1070),o=a(3893),c=a(4473),d=e([o,c]);[o,c]=d.then?(await d)():d;let p=(0,l.l)(c,"default"),u=(0,l.l)(c,"getStaticProps"),m=(0,l.l)(c,"getStaticPaths"),x=(0,l.l)(c,"getServerSideProps"),h=(0,l.l)(c,"config"),g=(0,l.l)(c,"reportWebVitals"),v=(0,l.l)(c,"unstable_getStaticProps"),j=(0,l.l)(c,"unstable_getStaticPaths"),y=(0,l.l)(c,"unstable_getStaticParams"),S=(0,l.l)(c,"unstable_getServerProps"),b=(0,l.l)(c,"unstable_getServerSideProps"),f=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/category/[id]",pathname:"/category/[id]",bundlePath:"",filename:""},components:{App:o.default,Document:n.default},userland:c});s()}catch(e){s(e)}})},4473:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>x,getStaticPaths:()=>p,getStaticProps:()=>u});var r=a(997),i=a(6689),l=a(1163),n=a(968),o=a.n(n),c=a(2445),d=e([c]);c=(d.then?(await d)():d)[0];let p=async()=>{try{let e=process.env.VERCEL_URL||"localhost:3000",t=`https://${e}/api/categories?nav=true`,a=await fetch(t);if(!a.ok)throw Error(`获取分类失败: ${a.status}`);return{paths:((await a.json()).data||[]).map(e=>({params:{id:e.slug}})),fallback:!0}}catch(e){return console.error("获取分类路径失败:",e),{paths:[],fallback:!0}}},u=async({params:e})=>{try{let{id:t}=e,a="https",s=process.env.VERCEL_URL||"localhost:3000",r=`${a}://${s}/api/categories/${t}`,i=await fetch(r);if(!i.ok)throw Error(`获取分类详情失败: ${i.status}`);let l=(await i.json()).data||m(t),n=`${a}://${s}/api/category/${t}?page=1`,o=await fetch(n);if(!o.ok)throw Error(`获取分类新闻失败: ${o.status}`);let{news:c=[],pagination:d={total:0,page:1,pageSize:10}}=(await o.json()).data||{};return{props:{category:l,news:c,pagination:d,lastUpdated:new Date().toISOString()},revalidate:900}}catch(t){return console.error("获取分类详情失败:",t),{props:{category:m(e?.id||"unknown"),news:[],pagination:{total:0,page:1,pageSize:10},lastUpdated:new Date().toISOString()},revalidate:60}}},m=e=>({id:e,slug:e,name:e,description:`关于${e}的最新资讯`,showInNav:!1,aliases:[],metadata:{}}),x=({category:e,news:t,pagination:a,lastUpdated:s})=>{let n=(0,l.useRouter)(),[d,p]=(0,i.useState)("latest");if(n.isFallback)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-secondary-200 rounded w-1/3 mb-4"}),r.jsx("div",{className:"h-4 bg-secondary-200 rounded w-2/3 mb-8"}),[1,2,3].map(e=>r.jsx("div",{className:"h-40 bg-secondary-200 rounded mb-4"},e))]})});let u=new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsxs)("title",{children:[e?.name||"加载中..."," - 科技前沿资讯"]}),r.jsx("meta",{name:"description",content:e?.description||""})]}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:e?.name||"加载中..."}),r.jsx("p",{className:"text-gray-600",children:e?.description||""}),(0,r.jsxs)("p",{className:"text-sm text-secondary-500 mt-2",children:["最后更新: ",u]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{className:"text-secondary-600",children:["共 ",a?.total||0," 条资讯"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"sort",className:"mr-2 text-secondary-600",children:"排序："}),(0,r.jsxs)("select",{id:"sort",value:d,onChange:e=>{p(e.target.value)},className:"select-primary",children:[r.jsx("option",{value:"latest",children:"最新发布"}),r.jsx("option",{value:"oldest",children:"最早发布"})]})]})]}),t?.length>0?r.jsx("div",{className:"space-y-6",children:t.map(e=>r.jsx(c.Z,{news:e},e.id))}):r.jsx("div",{className:"text-center py-10",children:r.jsx("div",{className:"text-secondary-600",children:"该分类下暂无资讯"})})]})]})};s()}catch(e){s(e)}})},5564:e=>{e.exports=require("date-fns/locale")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},1175:e=>{e.exports=require("react-query")},997:e=>{e.exports=require("react/jsx-runtime")},7734:e=>{e.exports=require("use-sync-external-store/with-selector")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9648:e=>{e.exports=import("axios")},6201:e=>{e.exports=import("react-hot-toast")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[567,424,859,315,371,893,931],()=>a(8248));module.exports=s})();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{9965:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/saved",function(){return a(6105)}])},4198:function(e,s,a){"use strict";a.d(s,{dy:function(){return n},qe:function(){return l},y6:function(){return c}});var t=a(7066);let r="/api/user",n=async()=>{try{return(await t.Z.get("".concat(r,"/saved"))).data.data.savedNews||[]}catch(e){throw console.error("获取保存的资讯失败:",e),e}},c=async(e,s)=>{try{return(await t.Z.post("".concat(r,"/saved"),{newsId:e,categories:s})).data.data}catch(e){throw console.error("保存资讯失败:",e),e}},l=async e=>{try{return(await t.Z.delete("".concat(r,"/saved/").concat(e))).data.data}catch(e){throw console.error("取消保存资讯失败:",e),e}}},6105:function(e,s,a){"use strict";a.r(s);var t=a(5893);a(7294);var r=a(9008),n=a.n(r),c=a(1664),l=a.n(c),i=a(5675),o=a.n(i),d=a(8767),m=a(9257),x=a(4346),h=a(6501),u=a(4198);let v=async()=>{try{return{savedNews:await (0,u.dy)()}}catch(e){throw console.error("获取保存的资讯失败:",e),e}},p=e=>({ai:"人工智能","quantum-computing":"量子计算",blockchain:"区块链",biotech:"生物科技","ar-vr":"AR/VR","autonomous-vehicles":"自动驾驶"})[e]||e,j=e=>(0,m.Z)(new Date(e),"yyyy年MM月dd日 HH:mm",{locale:x.Z});s.default=()=>{let{data:e,isLoading:s,isError:a}=(0,d.useQuery)("savedNews",v,{staleTime:3e5}),r=async e=>{try{await (0,u.qe)(e),window.location.reload(),h.Am.success("资讯已从收藏中移除")}catch(e){console.error("移除保存的资讯失败:",e),h.Am.error("移除失败，请稍后重试")}};if(s)return(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,t.jsx)("div",{className:"h-8 bg-secondary-200 rounded w-48 mb-6"}),[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-24 bg-secondary-200 rounded"},e))]})});if(a||!e)return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 text-center",children:[(0,t.jsx)("div",{className:"text-danger mb-2",children:"获取保存的资讯失败"}),(0,t.jsx)("button",{className:"btn-primary",onClick:()=>window.location.reload(),children:"重试"})]});let{savedNews:c=[]}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"已保存资讯 - 科技资讯"}),(0,t.jsx)("meta",{name:"description",content:"查看您保存的科技资讯"})]}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-secondary-900",children:"已保存资讯"}),(0,t.jsxs)("span",{className:"text-secondary-600",children:["共 ",c.length," 条"]})]}),c.length>0?(0,t.jsx)("div",{className:"space-y-4",children:c.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 flex flex-col md:flex-row",children:[e.imageUrl&&(0,t.jsx)("div",{className:"relative h-40 md:h-32 md:w-48 rounded-lg overflow-hidden mb-4 md:mb-0 md:mr-4",children:(0,t.jsx)(o(),{src:e.imageUrl,alt:e.title,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l(),{href:"/news/".concat(e.id),className:"text-lg font-semibold text-secondary-900 hover:text-primary-600 mb-2 block",children:e.title}),(0,t.jsx)("p",{className:"text-secondary-600 text-sm mb-3",children:e.summary})]}),(0,t.jsx)("button",{className:"text-secondary-400 hover:text-danger p-1",onClick:()=>r(e.id),title:"取消保存",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center text-sm text-secondary-500 mt-2",children:[(0,t.jsx)("span",{className:"mr-3",children:(0,t.jsx)("span",{className:"font-medium text-primary-600",children:e.savedCategories&&e.savedCategories.length>0?e.savedCategories.map(e=>p(e)).join(", "):p(e.category)})}),(0,t.jsx)("span",{className:"mr-3",children:e.source}),(0,t.jsxs)("span",{className:"mr-3",children:["发布于 ",j(e.publishDate)]}),(0,t.jsxs)("span",{children:["保存于 ",j(e.savedAt)]})]}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.tags&&e.tags.map(e=>(0,t.jsx)(l(),{href:"/search?tag=".concat(encodeURIComponent(e)),className:"inline-block bg-secondary-100 text-secondary-600 text-xs px-2 py-1 rounded hover:bg-secondary-200",children:e},e))})]})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-secondary-400 mb-4",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,t.jsx)("h3",{className:"text-xl font-medium text-secondary-900 mb-2",children:"暂无保存的资讯"}),(0,t.jsx)("p",{className:"text-secondary-600 mb-4",children:"浏览资讯并点击保存按钮，将感兴趣的内容添加到这里"}),(0,t.jsx)(l(),{href:"/",className:"btn-primary",children:"浏览最新资讯"})]})]})]})}}},function(e){e.O(0,[278,257,888,774,179],function(){return e(e.s=9965)}),_N_E=e.O()}]);
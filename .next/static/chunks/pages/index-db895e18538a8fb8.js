(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(7246)}])},1852:function(e,s,a){"use strict";var n=a(5893);a(7294),s.Z=e=>{let{categories:s,selectedCategory:a,onSelectCategory:t}=e;return(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h2",{className:"text-lg font-medium text-secondary-800",children:"资讯分类"}),a&&(0,n.jsxs)("button",{onClick:()=>t(""),className:"text-sm text-primary-500 hover:text-primary-600 flex items-center",children:["清除筛选",(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,n.jsx)("div",{className:"hidden md:flex flex-wrap gap-2",children:s.map(e=>(0,n.jsxs)("button",{onClick:()=>t(e.slug),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(a===e.slug?"bg-primary-500 text-white":"bg-secondary-100 text-secondary-700 hover:bg-secondary-200"),children:[e.icon&&(0,n.jsx)("span",{className:"mr-1",children:e.icon}),e.name]},e.slug))}),(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)("select",{value:a,onChange:e=>t(e.target.value),className:"input",children:s.map(e=>(0,n.jsx)("option",{value:e.slug,children:e.name},e.slug))})})]})}},7246:function(e,s,a){"use strict";a.r(s);var n=a(5893),t=a(7294),r=a(9008),c=a.n(r),l=a(7183),d=a(1852),i=a(8767),o=a(7111),m=a(4198);let u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var s;let a=e?"/api/news?category=".concat(encodeURIComponent(e)):"/api/news",n=await fetch(a);if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let t=await n.json();return(null===(s=t.data)||void 0===s?void 0:s.news)||[]}catch(e){return console.error("获取新闻数据失败:",e),[]}};s.default=()=>{let[e,s]=(0,t.useState)(""),[a,r]=(0,t.useState)([]),{data:x,isLoading:h,isError:g}=(0,i.useQuery)(["news",e],()=>u(e),{staleTime:3e5});(0,t.useEffect)(()=>{(async()=>{try{let e=(await (0,m.dy)()).map(e=>e.id);r(e)}catch(e){console.error("获取保存的资讯失败:",e)}})()},[]);let j=(e,s)=>{s?r(s=>[...s,e]):r(s=>s.filter(s=>s!==e))},{data:v}=(0,i.useQuery)("categories",()=>o.z7(),{staleTime:36e5}),p=[{slug:"",name:"全部"},...(v||[]).map(e=>({slug:e.slug,name:e.name}))];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c(),{children:(0,n.jsx)("title",{children:"科技资讯 - 全球最新科技动态"})}),(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-secondary-900",children:"探索全球最新科技资讯"}),(0,n.jsx)("p",{className:"mt-2 text-secondary-600 max-w-2xl mx-auto",children:"通过AI小总结快速了解核心内容，结构化信息和可视化呈现帮助您深入洞察科技趋势"})]}),(0,n.jsx)(d.Z,{categories:p,selectedCategory:e,onSelectCategory:s}),(0,n.jsx)("div",{className:"space-y-6",children:h?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,n.jsxs)("div",{className:"card animate-pulse",children:[(0,n.jsx)("div",{className:"h-48 bg-secondary-200 rounded-md mb-4"}),(0,n.jsx)("div",{className:"h-6 bg-secondary-200 rounded w-3/4 mb-2"}),(0,n.jsx)("div",{className:"h-4 bg-secondary-200 rounded w-1/2 mb-4"}),(0,n.jsx)("div",{className:"h-20 bg-secondary-200 rounded mb-4"}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("div",{className:"h-6 bg-secondary-200 rounded w-16"}),(0,n.jsx)("div",{className:"h-6 bg-secondary-200 rounded w-16"})]})]},s))}):g?(0,n.jsxs)("div",{className:"text-center py-10",children:[(0,n.jsx)("div",{className:"text-danger mb-2",children:"获取资讯失败"}),(0,n.jsx)("button",{className:"btn-primary",onClick:()=>window.location.reload(),children:"重试"})]}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==x?void 0:x.map(e=>(0,n.jsx)(l.Z,{news:e,isSaved:a.includes(e.id),onSaveStatusChange:j},e.id))})})]})]})}}},function(e){e.O(0,[278,88,112,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);
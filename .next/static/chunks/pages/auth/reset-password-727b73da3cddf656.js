(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{3129:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/reset-password",function(){return r(2803)}])},2803:function(e,s,r){"use strict";r.r(s);var t=r(5893),a=r(7294),n=r(9008),c=r.n(n),l=r(1664),d=r.n(l),i=r(1163);s.default=()=>{let e=(0,i.useRouter)(),{token:s}=e.query,[r,n]=(0,a.useState)({password:"",confirmPassword:""}),[l,o]=(0,a.useState)({}),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[u,w]=(0,a.useState)(!1),[j,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{s&&f(!0)},[s]);let g=e=>{let{name:s,value:t}=e.target;n({...r,[s]:t}),l[s]&&o({...l,[s]:""})},N=()=>{let e={};return r.password?r.password.length<6&&(e.password="密码长度不能少于6个字符"):e.password="请输入新密码",r.confirmPassword?r.confirmPassword!==r.password&&(e.confirmPassword="两次输入的密码不一致"):e.confirmPassword="请确认新密码",o(e),0===Object.keys(e).length},v=async t=>{if(t.preventDefault(),p(""),N()){x(!0);try{await new Promise(e=>setTimeout(e,1e3)),console.log("密码重置成功",{token:s,password:r.password}),w(!0),setTimeout(()=>{e.push("/auth/login?reset=success")},3e3)}catch(e){p(e instanceof Error?e.message:"重置密码失败，请重试")}finally{x(!1)}}};return j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c(),{children:[(0,t.jsx)("title",{children:"重置密码 - 科技资讯"}),(0,t.jsx)("meta",{name:"description",content:"重置您的科技资讯账户密码"})]}),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-center text-3xl font-bold text-secondary-900",children:"重置密码"}),(0,t.jsx)("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"请输入您的新密码"})]}),u?(0,t.jsx)("div",{className:"mt-8 space-y-6",children:(0,t.jsx)("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded relative",role:"alert",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"py-1",children:(0,t.jsx)("svg",{className:"fill-current h-6 w-6 text-success-500 mr-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM6.7 9.29L9 11.6l4.3-4.3 1.4 1.42L9 14.4l-3.7-3.7 1.4-1.42z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"密码重置成功"}),(0,t.jsx)("p",{className:"text-sm",children:"您的密码已成功重置，即将跳转到登录页面..."})]})]})})}):(0,t.jsxs)(t.Fragment,{children:[h&&(0,t.jsx)("div",{className:"bg-danger-50 border border-danger-200 text-danger-700 px-4 py-3 rounded relative",role:"alert",children:(0,t.jsx)("span",{className:"block sm:inline",children:h})}),(0,t.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:v,children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary-700",children:"新密码"}),(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"input-primary w-full ".concat(l.password?"border-danger-300 focus:border-danger-500 focus:ring-danger-500":""),value:r.password,onChange:g}),l.password&&(0,t.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:l.password})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-secondary-700",children:"确认新密码"}),(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"input-primary w-full ".concat(l.confirmPassword?"border-danger-300 focus:border-danger-500 focus:ring-danger-500":""),value:r.confirmPassword,onChange:g}),l.confirmPassword&&(0,t.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:l.confirmPassword})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"btn-primary w-full flex justify-center items-center",disabled:m,children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"重置中..."]}):"重置密码"})})]})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)(d(),{href:"/auth/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"返回登录"})})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c(),{children:[(0,t.jsx)("title",{children:"重置密码 - 科技资讯"}),(0,t.jsx)("meta",{name:"description",content:"重置您的科技资讯账户密码"})]}),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-center text-3xl font-bold text-secondary-900",children:"链接已失效"}),(0,t.jsx)("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"您的密码重置链接已失效或已过期"})]}),(0,t.jsx)("div",{className:"bg-danger-50 border border-danger-200 text-danger-700 px-4 py-3 rounded relative",role:"alert",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"py-1",children:(0,t.jsx)("svg",{className:"fill-current h-6 w-6 text-danger-500 mr-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM10 6a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0V7a1 1 0 0 1 1-1zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"无效的重置链接"}),(0,t.jsx)("p",{className:"text-sm",children:"请重新申请密码重置，获取新的重置链接。"})]})]})}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)(d(),{href:"/auth/forgot-password",className:"btn-primary inline-flex justify-center px-4 py-2",children:"重新申请密码重置"})})]})})]})}},9008:function(e,s,r){e.exports=r(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3129)}),_N_E=e.O()}]);